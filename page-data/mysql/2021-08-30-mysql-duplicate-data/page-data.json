{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/mysql/2021-08-30-mysql-duplicate-data","result":{"data":{"post":{"slug":"/mysql/2021-08-30-mysql-duplicate-data","title":"중복 데이터 처리 경험","date":"30.08.2021","tags":[{"name":"MYSQL","slug":"mysql"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"중복 데이터 처리 경험\",\n  \"date\": \"2021-08-30T00:00:00.000Z\",\n  \"slug\": \"/mysql/2021-08-30-mysql-duplicate-data\",\n  \"tags\": [\"MYSQL\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 17 1 2021-08-18 14:45 1 2021-08-18 14:46\\n2 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 16 1 2021-08-18 14:46 1 2021-08-18 14:46\\n3 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 14 1 2021-08-18 14:49 1 2021-08-19 13:30\\n4 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 14 1 2021-08-18 14:49 1 2021-08-19 13:30\\n5 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 22 1 2021-08-24 15:59 1 2021-08-24 15:59\\n6 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 22 1 2021-08-24 15:59 1 2021-08-24 15:59\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT COUNT(c.id) as \\uC911\\uBCF5\\uB41C \\uB370\\uC774\\uD130\\uAC00 \\uC874\\uC7AC\\uD558\\uB294 \\uAE30\\uBD80\\uAC74 \\uC218\\nFROM (SELECT id,count(id) FROM store_donation.donation_receipts GROUP BY donation_id HAVING count(*) > 1) as c;\\n\")), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"COUNT(c.id)\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"2\")))), mdx(\"h3\", null, \"\\uC911\\uBCF5\\uB41C \\uB370\\uC774\\uD130\\uAC00 2\\uAC1C \\uC774\\uC0C1\\uC778 \\uB370\\uC774\\uD130\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select *\\nfrom store_donation.donation_receipts\\nwhere donation_id in (\\nSELECT donation_id FROM store_donation.donation_receipts GROUP BY donation_id HAVING count(*) > 1\\n);\\n\")), mdx(\"h3\", null, \"temp \\uD14C\\uC774\\uBE14\\uC5D0 \\uC911\\uBCF5\\uB41C \\uB370\\uC774\\uD130\\uAC00 2\\uAC1C \\uC774\\uC0C1\\uC778 \\uB370\\uC774\\uD130 \\uBCF5\\uC0AC\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"create table store_donation.temp as select *\\nfrom store_donation.donation_receipts a\\nwhere donation_id in (SELECT donation_id frOM store_donation.donation_receipts GROUP BY donation_id HAVING count(*) > 1 )\\norder by donation_id\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"3 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 14 1 2021-08-18 14:49:43 1 2021-08-19 13:30:44\\n4 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 14 1 2021-08-18 14:49:43 1 2021-08-19 13:30:44\\n5 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 22 1 2021-08-24 15:59:22 1 2021-08-24 15:59:22\\n6 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 22 1 2021-08-24 15:59:22 1 2021-08-24 15:59:22\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select count(*) from temp\\n\")), mdx(\"h3\", null, \"\\uAE30\\uBD80\\uC601\\uC218\\uC99D \\uD14C\\uC774\\uBE14\\uC5D0\\uC11C \\uAE30\\uBD80\\uAC74\\uB2F9 max\\uAC00 \\uC544\\uB2CC \\uB370\\uC774\\uD130\\uB97C \\uD655\\uC778\\uD558\\uB294 \\uCFFC\\uB9AC\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select count(*)\\nfrom temp a\\nwhere [a.id](http://a.id)!= (select max(id) from store_donation.donation_receipts b where b.donation_id=a.donation_id)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select *\\nfrom store_donation.temp a\\nwhere [a.id](http://a.id)!= (select max(id) from store_donation.donation_receipts b where b.donation_id=a.donation_id)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"3 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 14 1 2021-08-18 14:49:43 1 2021-08-19 13:30:44\\n5 NATIVE \\uC774\\uB984  1234 UserApplicationCompleted 22 1 2021-08-24 15:59:22 1 2021-08-24 15:59:22\\n\\n=>SELECT * FROM store_donation.donation_receipts GROUP BY donation_id HAVING count(*) > 1; \\uAC80\\uC0C9\\uD574\\uB3C4 \\uACB0\\uACFC \\uAC19\\uC74C\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select a.donation_id, max([a.id](http://a.id)\\nfrom temp a inner join store_donation.donation_receipts b on a.donation_id = b.donation_id\\n\")), mdx(\"p\", null, \"->X\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select a.donation_id, max([a.id](http://a.id)\\nfrom store_donation.donation_receipts a inner join store_donation.temp b on a.donation_id = b.donation_id group by donation_id\\n\")), mdx(\"p\", null, \"14 4\\n22 6\"), mdx(\"h3\", null, \"\\uCD1D \\uAE30\\uBD80\\uC601\\uC218\\uC99D \\uB370\\uC774\\uD130\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT count(*) FROM store_donation.donation_receipts ;\\n\")), mdx(\"h3\", null, \"\\uC911\\uBCF5\\uC744 \\uC81C\\uAC70\\uD588\\uC744 \\uB54C \\uD14C\\uC774\\uBE14\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select count(distinct donation_id) from store_donation.donation_receipts ;\\n\")), mdx(\"p\", null, \"\\uCD94\\uC815\\n\\uB450 \\uB370\\uC774\\uD130\\uC758 \\uC77C\\uBD80 \\uCEEC\\uB7FC\\uC774 \\uAC19\\uC740 \\uC0C1\\uD669\\n\\uCFFC\\uB9AC\\uB97C \\uD1B5\\uD574 \\uAC80\\uC99D\"), mdx(\"h3\", null, \"\\uC911\\uBCF5\\uC744 \\uC81C\\uAC70\\uD588\\uC744 \\uB54C \\uD14C\\uC774\\uBE14 \\uB370\\uC774\\uD130 \\uAC2F\\uC218\\uC640 \\uAC19\\uC73C\\uBA74 \\uAC80\\uC99D\\uB428\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select count(distinct donation_id, deductor_type, deductor_name, deductor_registration_no) from store_donation.donation_receipts ;\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"select *\\nfrom store_donation.donation_receipts\\nwhere donation_id in (\\nSELECT donation_id FROM store_donation.donation_receipts GROUP BY donation_id HAVING count(*) > 1\\n);\\n\")), mdx(\"h3\", null, \"delte\\uD558\\uAE30 (max\\uAC12\\uC744 \\uC81C\\uC678\\uD55C \\uC911\\uBCF5\\uB41C \\uB370\\uC774\\uD130 \\uB9AC\\uC2A4\\uD2B8)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"DELETE \\nFROM store_donation.donation_receipts \\nWHERE id IN (\\nselect a.id\\nfrom store_donation.temp a\\nwhere a.id not in(select max(id) from store_donation.donation_receipts b where b.donation_id=a.donation_id) \\n);\\n\")), mdx(\"p\", null, \"17:04:24\\tDELETE FROM store_donation.donation_receipts WHERE id IN ( select a.id from store_donation.temp a where a.id in(select max(id) from store_donation.donation_receipts b where b.donation_id=a.donation_id) )\\tError Code: 1093. You can't specify target table 'donation_receipts' for update in FROM clause\\t0.000 sec\"), mdx(\"p\", null, \"\\uC5D0\\uB7EC \\uBC1C\\uC0DD\"), mdx(\"p\", null, \"\\uCC3E\\uC544\\uBCF4\\uB2C8 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://velog.io/@khnn/TIL-DELETE%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC-%ED%99%9C%EC%9A%A9\"\n  }, \"https://velog.io/@khnn/TIL-DELETE\\uC5D0\\uC11C\\uC758-\\uC11C\\uBE0C\\uCFFC\\uB9AC-\\uD65C\\uC6A9\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"DELETE \\nFROM store_donation.donation_receipts e\\nWHERE e.id IN\\n(\\nselect x.id from\\n (\\nselect a.id\\nfrom store_donation.temp a\\nwhere a.id not in(select max(id) from store_donation.donation_receipts b where b.donation_id=a.donation_id) \\n) x\\n)\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1   NATIVE  \\uC774\\uB984  1234    UserApplicationCompleted    17  1   2021-08-18 14:45:11 1   2021-08-18 14:46:01\\n2   NATIVE  \\uC774\\uB984      1234    UserApplicationCompleted    16  1   2021-08-18 14:46:26 1   2021-08-18 14:46:49\\n4   NATIVE  \\uC774\\uB984  1234    UserApplicationCompleted    14  1   2021-08-18 14:49:43 1   2021-08-19 13:30:44\\n7   NATIVE  \\uC774\\uB984  1234    UserApplicationCompleted    22  1   2021-08-24 15:59:22 1   2021-08-24 15:59:22\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"COUNT(c.id) 2 중복된 데이터가 2개 이상인 데이터 temp 테이블에 중복된 데이터가 2개 이상인 데이터 복사 기부영수증 테이블에서 기부건당 max가 아닌 데이터를 확인하는 쿼리 ->X 14 4\n22…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/mysql/2021-08-30-mysql-duplicate-data","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}