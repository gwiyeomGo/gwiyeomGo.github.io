{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/golang/2022-09-02-go-read-requestBody","result":{"data":{"post":{"slug":"/golang/2022-09-02-go-read-requestBody","title":"Golang(Go) request body 를 context 에 추가해서 사용 경험","date":"02.09.2022","tags":[{"name":"GOLANG","slug":"golang"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Golang(Go) request body 를 context 에 추가해서 사용 경험\",\n  \"date\": \"2022-09-02T00:00:00.000Z\",\n  \"slug\": \"/golang/2022-09-02-go-read-requestBody\",\n  \"tags\": [\"GOLANG\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"body \\uAC12\\uC774 \\uC5B4\\uB290 \\uC0C1\\uD669\\uC5D0 \\uCD9C\\uB825\\uB418\\uC9C0 \\uC54A\\uB294\\uC9C0 \\uBB38\\uC81C \\uCC3E\\uC544\\uBCF4\\uACE0 \\uC218\\uC815\\uD558\\uAE30\"), mdx(\"h1\", null, \"\\uBC1C\\uACAC\\uD55C \\uBB38\\uC81C\\uB294\"), mdx(\"p\", null, \"\\uACE0\\uC0AC\\uC5D0\\uB80C\\uC5D0 401\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uC2DC body \\uAC12\\uC774 \\uCD9C\\uB825\\uB428\\n\\uACE0\\uC0AC\\uC5D0\\uB80C\\uC5D0 500\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uC2DC body \\uAC12\\uC774 \\uCD9C\\uB825 X\\n\\uACE0\\uC0AC\\uC5D0\\uB80C\\uC5D0 400\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uC2DC body \\uAC12\\uC774 \\uCD9C\\uB825 X\"), mdx(\"p\", null, \"post api \\uB97C \\uD638\\uCD9C\\uD588\\uC744 \\uB54C 401 \\uC5D0\\uB7EC\\uC758 \\uACBD\\uC6B0 body \\uAC00 \\uCD9C\\uB825\\uB41C\\uB2E4.\\n\\uD1A0\\uD070\\uC774 \\uB9CC\\uB8CC\\uB41C \\uC0C1\\uD0DC\\uC5D0\\uC11C \\uB4F1\\uB85D\\uC2DC \\uD1A0\\uD070\\uC774 \\uB9CC\\uB8CC\\uB418\\uC11C \\uC5D0\\uB7EC \\uBC1C\\uC0DD => \\uAC1C\\uBC1C\\uC624\\uB958\\uB85C \\uBCF4\\uB0C4\\n401 \\uC5D0\\uB7EC\\uAC00 \\uB098\\uBA74 => \\uAC1C\\uBC1C\\uC624\\uB958\\uC5D0 body \\uAC12\\uC774 \\uCD9C\\uB825\\uB41C post \\uC624\\uB958 \\uC5C5\\uBB34\\uAC00 \\uC874\\uC7AC\\uD568\\nbody \\uB294 \\uC81C\\uB300\\uB85C \\uC77D\\uD600\\uC11C \\uBCF4\\uB0B4\\uC9C0\\uACE0 \\uC788\\uC74C\"), mdx(\"h1\", null, \"\\uB0B4\\uAC00 \\uC6D0\\uD558\\uB294 \\uAC83\\uC740\"), mdx(\"p\", null, \"400,500 \\uC0C1\\uD0DC \\uCF54\\uB4DC\\uC758 \\uC5D0\\uB7EC \\uBC1C\\uC0DD\\uC2DC body \\uAC12\\uC774 \\uCD9C\\uB825\\uB418\\uC5C8\\uC73C\\uBA74 \\uD55C\\uB2E4\"), mdx(\"h1\", null, \"\\uB450 \\uACBD\\uC6B0\\uB97C \\uB514\\uBC84\\uAE45\\uD558\\uBA74\\uC11C \\uC54C\\uAC8C\\uB41C \\uC810\\uC740\"), mdx(\"p\", null, \"400\\uBC88\\uC758 \\uACBD\\uC6B0 CustomHTTPErrorHandler \\uB97C \\uC624\\uAE30 \\uC804\\nCreateDatabaseContext \\uBBF8\\uB4E4\\uC6E8\\uC5B4\\uB97C \\uB4E4\\uB9AC\\uACE0\\nCreateDatabaseContext \\uBBF8\\uB4E4\\uC6E8\\uC5B4 \\uC5D0\\uC11C request \\uC758 Body \\uC758 N \\uC774 0\\uC774 \\uB41C\\uB2E4\\n\\uC774 \\uC0C1\\uD669\\uC744 \\uAC70\\uCE5C request Body \\uB97C readAll \\uD558\\uBA74 EOF \\uB77C\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD55C\\uB2E4\\n=> req.Body \\uB97C \\uC77D\\uC744\\uC218 \\uC5C6\\uB2E4\"), mdx(\"p\", null, \"401\\uBC88\\uC758 \\uACBD\\uC6B0 CustomHTTPErrorHandler \\uB97C \\uC624\\uAE30 \\uC804 CreateDatabaseContext\\uB97C \\uB4E4\\uB9AC\\uC9C0 \\uC54A\\uC74C\\nCreateDatabaseContext\\uB97C \\uC5D0\\uC11C next \\uB97C \\uB4E4\\uB9AC\\uBA74\\nsawEOF = true \\uB85C \\uBC14\\uB01C\\nreq.Body \\uB97C \\uC77D\\uC744 \\uC218 \\uC5C6\\uB2E4\"), mdx(\"h3\", null, \"idea\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"req \\uAC00 \\uC0AC\\uB77C\\uC9C0\\uAE30 \\uC804\\uC5D0 body \\uAC12\\uC744 context \\uC5D0 \\uB123\\uB294\\uB2E4\\n\"), \"req \\uAC00 \\uC0AC\\uB77C\\uC9C0\\uAE30 \\uC804\\uC5D0 body \\uAC12\\uC744 log \\uC5D0 \\uB123\\uB294\\uB2E4?\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"//400,500 \\uC5D0\\uB7EC \\uC2DC body \\uB97C \\uC54C \\uC218 \\uC5C6\\uC5B4\\uC11C body \\uB97C Context \\uC5D0 \\uCD94\\uAC00\\uD558\\uB294 \\uCF54\\uB4DC\\nvar bodyBytes []byte\\nif req.Body != nil {\\n    bodyBytes, _ = ioutil.ReadAll(req.Body)\\n}\\n// Restore the io.ReadCloser to its original state\\nreq.Body = ioutil.NopCloser(bytes.NewBuffer(bodyBytes))\\nctx = context.WithValue(ctx, config.ContextRequestBody, string(bodyBytes))\\nc.SetRequest(req.WithContext(ctx))\\n\\n\\nbody := req.Context().Value(config.ContextRequestBody)\\nstr := fmt.Sprintf(\\\"%v\\\", body)\\n\\n\\nContextRequestBody= \\\"REQUEST_BODY\\\"\\n\\n\")), mdx(\"p\", null, \"context \\uC5D0\\uB294 db\\uC131\\uBCF4\\uC640 userclaim \\uB9CC \\uC800\\uC7A5\\uD55C\\uB2E4\"), mdx(\"h1\", null, \"\\uC5EC\\uAE30\\uC5D0 body \\uAC12\\uC744 \\uB123\\uB294\\uAC83\\uC740 \\uC633\\uC740 \\uAC83 \\uC77C\\uAE4C\\uC694?\"), mdx(\"p\", null, \"context \\uB97C \\uBC88\\uC5ED\\uD558\\uBA74 \\uBB38\\uB9E5,\\uD750\\uB984\\uC73C\\uB85C\\n\\uC6F9\\uACFC \\uC11C\\uBC84\\uC758 \\uD1B5\\uC2E0\\uC744 \\uD558\\uB294\\uB370\\uC5D0 \\uD544\\uC694\\uD55C \\uB370\\uC774\\uD130\\uB098 \\uAC12\\uC744 \\uC774 context\\uC548\\uC5D0 \\uB123\\uACE0 \\uD544\\uC694\\uD560\\uB54C \\uBF51\\uC544 \\uC4F0\\uB294 \\uD615\\uC2DD\\n\\uC774 \\uCEE8\\uD14D\\uC2A4\\uD2B8\\uC5D0 \\uD558\\uB098\\uC758 \\uC6F9 \\uC694\\uCCAD\\uC774 \\uCC98\\uB9AC\\uB418\\uB294 \\uB3D9\\uC548\\n\\uC720\\uC9C0\\uD574\\uC57C \\uD560 \\uAC12\\uC744 \\uB2F4\\uC544\\uB193\\uACE0\\n\\uD544\\uC694\\uD55C \\uACF3\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uBA74 \\uB41C\\uB2E4\"), mdx(\"p\", null, \"\\uC2DC\\uB3C41\\n\\uACE0\\uC0AC\\uC774\\uB80C\\uC774 \\uC2E4\\uD589\\uB418\\uB294 \\uACFC\\uC815\\uC5D0\\uC11C err \\uAC00 \\uB0AC\\uACE0\\nrequest \\uB97C \\uB0B4\\uAC00 \\uC608\\uC0C1\\uD560 \\uC218 \\uC5C6\\uB294 \\uC7A5\\uC18C\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uC73C\\uB2C8\\nbody \\uAC12\\uC744 \\uC77D\\uB294 \\uCF54\\uB4DC \\uB2E4\\uC74C\\uC5D0\\nbody \\uAC12\\uC744 \\uB2E4\\uC2DC \\uB123\\uC5B4\\uC8FC\\uB294 \\uCF54\\uB4DC\\uB3C4 \\uCD94\\uAC00\\uD574 \\uBCF4\\uAE30\\uB85C\\uD568\"), mdx(\"p\", null, \"\\uD655\\uC778\\uC740 \\uC5B4\\uB5BB\\uAC8C?\\ndev \\uC5D0 \\uCF54\\uB4DC\\uB97C \\uCD94\\uAC00 \\uBC30\\uD3EC \\uD6C4 dev \\uC5D0\\uC11C 400\\uBC88 \\uC5D0\\uB7EC\\uB97C \\uBC1C\\uC0DD\\uC2DC\\uD0B4\\ndev \\uC5D0 \\uCF54\\uB4DC\\uB97C \\uCD94\\uAC00 \\uBC30\\uD3EC \\uD6C4 dev \\uC5D0\\uC11C 500\\uBC88 \\uC5D0\\uB7EC\\uB97C \\uBC1C\\uC0DD\\uC2DC\\uD0B4\"), mdx(\"p\", null, \"=> \\uC2E4\\uD328\"), mdx(\"p\", null, \"\\uC2DC\\uB3C4 2\\n400\\uBC88\\uC758 \\uACBD\\uC6B0 CustomHTTPErrorHandler \\uB97C \\uC624\\uAE30 \\uC804\\nCreateDatabaseContext \\uBBF8\\uB4E4\\uC6E8\\uC5B4\\uB97C \\uB4E4\\uB9AC\\uACE0\\nnext(c) \\uB97C \\uAC70\\uCE58\\uBA74 reqeust.Body \\uB97C \\uC77D\\uC744 \\uC218 \\uC5C6\\uB3C4\\uB85D \\uC81C\\uD55C\\uD55C\\uB2E4\"), mdx(\"h2\", null, \"\\uCC38\\uACE0\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Context\\n\", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://jaehue.github.io/post/how-to-use-golang-context/\"\n  }, \"https://jaehue.github.io/post/how-to-use-golang-context/\"), mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://myungsworld.tistory.com/13\"\n  }, \"https://myungsworld.tistory.com/13\")), \"body \\uC77D\\uB294\\uBC95\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://jusths.tistory.com/65\"\n  }, \"https://jusths.tistory.com/65\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"buf := make([]byte, req.ContentLength)\\nif _, err := io.ReadFull(req.Body, buf); err == io.EOF {\\n    fmt.Println( io.ErrUnexpectedEOF)\\n} else if err != nil {\\n    fmt.Println( io.ErrUnexpectedEOF)\\n}\\n\")), mdx(\"p\", null, \"*\\uAE30\\uD0C0\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://mingrammer.com/translation-go-walkthrough-io-package/\"\n  }, \"https://mingrammer.com/translation-go-walkthrough-io-package/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.geeksforgeeks.org/io-limitreader-function-in-golang-with-examples/\"\n  }, \"https://www.geeksforgeeks.org/io-limitreader-function-in-golang-with-examples/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://velog.io/@yeonjoo7/go%EC%96%B8%EC%96%B4%EC%9D%98-io%ED%8C%A8%ED%82%A4%EC%A7%80\"\n  }, \"https://velog.io/@yeonjoo7/go%EC%96%B8%EC%96%B4%EC%9D%98-io%ED%8C%A8%ED%82%A4%EC%A7%80\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"body 값이 어느 상황에 출력되지 않는지 문제 찾아보고 수정하기 발견한 문제는 고사에렌에 401에러가 발생시 body 값이 출력됨\n고사에렌에 500에러가 발생시 body 값이 출력 X\n고사에렌에 400에러가 발생시 body 값이 출력 X post…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/golang/2022-09-02-go-read-requestBody","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}