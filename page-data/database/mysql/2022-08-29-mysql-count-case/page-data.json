{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/database/mysql/2022-08-29-mysql-count-case","result":{"data":{"post":{"slug":"/database/mysql/2022-08-29-mysql-count-case","title":"mysql count 함수와 case 를 사용해서 여러 조건의 값을 출력","date":"29.08.2022","tags":[{"name":"MYSQL","slug":"mysql"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"mysql count 함수와 case 를 사용해서 여러 조건의 값을 출력\",\n  \"date\": \"2022-08-29T00:00:00.000Z\",\n  \"slug\": \"/database/mysql/2022-08-29-mysql-count-case\",\n  \"tags\": [\"MYSQL\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"\\uBC30\\uACBD\"), mdx(\"p\", null, \"\\uD504\\uB860\\uD2B8 \\uD654\\uBA74\\uC5D0\\uC11C \\uAE30\\uBD80 \\uBAA9\\uB85D\\uC744 \\uAC00\\uC838\\uC628\\uB2E4.\\n\\uC774\\uB54C\\n\\uC804\\uCCB4 \\uAE30\\uBD80 \\uD69F\\uC218\\n\\uC62C\\uD574 \\uAE30\\uBD80 \\uD69F\\uC218\\n\\uC62C\\uD574 \\uAE30\\uBD80\\uC601\\uC218\\uC99D \\uD69F\\uC218\\n\\uC2E0\\uCCAD\\uC774 \\uAC00\\uB2A5\\uD55C\\uB370 \\uC544\\uC9C1 \\uC2E0\\uCCAD \\uD558\\uC9C0 \\uC54A\\uC740 \\uD69F\\uC218(\\uC62C\\uD574)\\n\\uB97C \\uD55C\\uBC88\\uC5D0 \\uBCF4\\uACE0 \\uC2F6\\uB2E4\\uB294 \\uC694\\uCCAD\\uC774 \\uC788\\uC5C8\\uB2E4.\"), mdx(\"p\", null, \"\\uAE30\\uC874\\uC5D0\\uB294 \\uC0AC\\uC6A9\\uC790\\uC758 \\uAE30\\uBD80 \\uBAA9\\uB85D \\uC870\\uD68C api \\uB97C queryParams \\uB9CC \\uB2E4\\uB974\\uAC8C \\uC0AC\\uC6A9\\uD558\\uC154\\uC11C 4\\uBC88 \\uD638\\uCD9C\\uD558\\uC168\\uB2E4\\uACE0\\uD55C\\uB2E4..\"), mdx(\"h1\", null, \"\\uC5B4\\uB5BB\\uAC8C \\uD55C\\uBC88\\uB9CC \\uBD88\\uB7EC\\uC11C 4\\uAC1C\\uC758 \\uD69F\\uC218 \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC838\\uC62C \\uC218 \\uC788\\uC744\\uAE4C?\"), mdx(\"p\", null, \"\\uC0AC\\uC6A9\\uC790\\uC758 \\uAE30\\uBD80 \\uBAA9\\uB85D \\uC870\\uD68C api \\uB294 \\uC5EC\\uB7EC \\uD14C\\uC774\\uBE14\\uC774 left,inner join \\uB41C \\uCFFC\\uB9AC\\uAC00 \\uC874\\uC7AC\\uD55C\\uB2E4\\nif \\uBB38\\uC5D0\\uC11C queryParams \\uC870\\uAC74\\uB9CC \\uB2E4\\uB974\\uBA74 \\uB41C\\uB2E4\"), mdx(\"h1\", null, \"\\uCD5C\\uCD08\\uC2DC\\uB3C4..\"), mdx(\"p\", null, \"\\uC6B0\\uC120 service \\uC5D0\\uC11C 4\\uAC1C\\uC758 \\uC870\\uAC74\\uC744 map\\uC73C\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC11C\\n4\\uBC88 db \\uB97C \\uC870\\uD68C\\uD558\\uB294 \\uCF54\\uB4DC\\uB97C \\uB9CC\\uB4E4\\uC5C8\\uACE0\\n\\uC2E4\\uD589\\uC2DC\\uAC04\\uC774 4\\uCD08\\uAC00 \\uAC78\\uB838\\uB2E4.\"), mdx(\"p\", null, \"\\uC774\\uB807\\uAC8C \\uC5EC\\uB7EC\\uBC88 \\uAC00\\uB294 \\uAC83\\uC740 \\uB290\\uB9AC\\uBA70 \\uC88B\\uC9C0 \\uC54A\\uC740 \\uCF54\\uB4DC\\uB77C\\uACE0 \\uC0DD\\uAC01\\uD558\\uACE0\\n\\uD55C\\uBC88\\uC5D0 \\uC5EC\\uB7EC\\uACBD\\uC6B0\\uB97C \\uC54C \\uC218 \\uC788\\uB294 case \\uBB38 \\uACFC count \\uD568\\uC218\\uB97C \\uC0AC\\uC6A9\\uD558\\uAE30\\uB85C \\uD588\\uB2E4\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"SELECT\\nCOUNT(*) as allDonationsCount,\\nCOUNT(CASE WHEN e.receipt_available+s.receipt_available = 2 and r.donation_id is null and( mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) >= '2022-01-01' and  (mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) <= '2022-12-31' ))then 1 else null END) as notAppliedReceiptsCount,\\nCOUNT(CASE WHEN ( mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) >= '2022-01-01' and  (mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) <= '2022-12-31')) then 1 else null END)  as thisYearDonationsCount,\\nCOUNT(CASE WHEN (r.donation_id > 0  and mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) >= '2022-01-01' and  (mid(JSON_EXTRACT(donations.created, '$.datetime'), 2, 10) <= '2022-12-31')) then 1 else null END)  as appliedReceiptsCount\\nFROM donations\\nINNER JOIN eval_types as e ON donations.eval_type = e.type and e.deleted_at is null\\nINNER JOIN statuses as s ON donations.status = s.status\\nLEFT JOIN donors as r ON donations.id = r.donation_id and r.deleted_at is null WHERE (donations.deleted_at is null)\\nAND (donations.member_id = 1) ORDER BY donations.id DESC;\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"배경 프론트 화면에서 기부 목록을 가져온다.\n이때\n전체 기부 횟수\n올해 기부 횟수\n올해 기부영수증 횟수\n신청이 가능한데 아직 신청 하지 않은 횟수(올해)\n를 한번에 보고 싶다는 요청이 있었다. 기존에는 사용자의 기부 목록 조회 api…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/database/mysql/2022-08-29-mysql-count-case","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["2744905544","3090400250","318001574"]}