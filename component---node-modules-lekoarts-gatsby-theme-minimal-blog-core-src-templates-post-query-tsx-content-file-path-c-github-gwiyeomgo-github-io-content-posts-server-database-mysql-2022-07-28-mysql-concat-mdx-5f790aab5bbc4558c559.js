"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[4330],{8090:function(e,n,t){t.r(n),t.d(n,{Head:function(){return m.F},default:function(){return c}});var l=t(7294),r=t(1151);function d(e){const n=Object.assign({h3:"h3",ul:"ul",li:"li",code:"code",p:"p",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.h3,null,"배경"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"한 회원당 여러건의 주소를 갖을 수 있다"),"\n",l.createElement(n.li,null,"택배 기부는 사용자의 주소를 입력받고 저장"),"\n",l.createElement(n.li,null,"시도 및 시군구(",l.createElement(n.code,null,"sender_address"),"),상세주소(",l.createElement(n.code,null,"sender_address_detail"),")"),"\n"),"\n",l.createElement(n.p,null,"주소 검색 기능이 추가되었고\r\n기부자 정보에서 주소를 보기로 했음\r\n하지만 주소를 확인하기 어렵고\r\n기부자 정보에는 최근에 보냈던 주소가 보이기 때문에\r\n기부자 한명에  여러 주소가 존재하면 알 수 가 없다\r\n이후 주소를 목록 화면에서 보여주고\r\n화면 크기보다 길어지면 스크롤을 추가되도록 화면을 수정하기로 했다"),"\n",l.createElement(n.h3,null,"질문?"),"\n",l.createElement(n.p,null,"실제 기부자중 2개 이상의 주소를 입력한 회원은 몇명일까?\r\n주소 컬럼을 2개로 관리하는데 합처서 어떻게 볼 수 있지?"),"\n",l.createElement(n.h3,null,"기부자 회원id와 등록한 주소 정보 조회"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"SELECT d.member_id,sender_address,sender_address_detail FROM donations as d\r\nleft join deliveries  as c\r\non d.id = c.donation_id\r\ngroup by member_id,address\r\norder by d.member_id\n")),"\n",l.createElement(n.table,null,l.createElement(n.thead,null,l.createElement(n.tr,null,l.createElement(n.th,null,"member_id"),l.createElement(n.th,null,"sender_address"),l.createElement(n.th,null,"sender_address_details"))),l.createElement(n.tbody,null,l.createElement(n.tr,null,l.createElement(n.td,null,"1"),l.createElement(n.td,null,"광주 광산구"),l.createElement(n.td,null,"2-21")),l.createElement(n.tr,null,l.createElement(n.td,null,"1"),l.createElement(n.td,null,"광주 광산구"),l.createElement(n.td,null,"2-21")),l.createElement(n.tr,null,l.createElement(n.td,null,"1"),l.createElement(n.td,null,"대전광역시 유성구"),l.createElement(n.td,null,"3층")),l.createElement(n.tr,null,l.createElement(n.td,null,"2"),l.createElement(n.td,null,"경기도 군포시"),l.createElement(n.td,null,"105호")),l.createElement(n.tr,null,l.createElement(n.td,null,"2"),l.createElement(n.td,null,"경기도 군포시"),l.createElement(n.td,null,"105호")))),"\n",l.createElement(n.h3,null,"주소를 합처서 보고 싶다면"),"\n",l.createElement(n.p,null,l.createElement(n.code,null,"concat(sender_address,sender_address_detail) as address")," 을 통해서 address 를 합쳐서 조회할 수 있다."),"\n",l.createElement(n.p,null,"|member_id|address|\r\n|---|---|---|\r\n|1|광주 광산구 2-21|\r\n|1|광주 광산구 2-21|\r\n|1|대전광역시 유성구 3층|\r\n|2|경기도 군포시 105호|\r\n|2|경기도 군포시 105호|"),"\n",l.createElement(n.h3,null,"2건이상 다른 주소를 등록한 회원 조회"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"select  member_id,count(member_id) from\r\n(\r\n    // 기부자 회원id와 등록한 주소 정보 조회\r\n) as result\r\ngroup by result.member_id\r\nhaving count(result.member_id) > 1\n")),"\n",l.createElement(n.p,null,"|member_id|count(member_id)|\r\n|---|---|---|\r\n|1|2|\r\n|2|2|"),"\n",l.createElement(n.h3,null,"데이터를 확인해 보니"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"select   member_id,count(member_id)  from\r\n(\r\n  SELECT d.member_id,concat(sender_address,sender_address_detail) as address , FROM donations as d\r\n  left join deliveries  as c\r\n  on d.id = c.donation_id\r\n  group by member_id,address\r\n  order by d.member_id\r\n) as result\r\n group by result.member_id\r\n having count(result.member_id) > 1\n")),"\n",l.createElement(n.p,null,"작성했던 쿼리 실행결과 row(s) 숫자를 통해 count 를 확인했다."),"\n",l.createElement(n.p,null,"취소된 기부를 제외하고\r\n17844 명의 회원( 테스트 기부자 포함)이 택배 기부를 사용했고 주소가 존재한다.\r\n이때 회원이 기부를 보냈던 주소가 2개 이상인 경우는 569 명(테스트 기부자 포함)이 존재했다."))}var a=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?l.createElement(n,e,l.createElement(d,e)):d(e)},m=t(8804);function c(e){return l.createElement(m.Z,e,l.createElement(a,e))}m.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-c-github-gwiyeomgo-github-io-content-posts-server-database-mysql-2022-07-28-mysql-concat-mdx-5f790aab5bbc4558c559.js.map