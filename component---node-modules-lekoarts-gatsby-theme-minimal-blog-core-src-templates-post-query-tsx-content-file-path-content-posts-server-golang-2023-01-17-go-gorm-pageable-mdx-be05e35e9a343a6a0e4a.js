"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[110],{4747:function(e,t,n){n.r(t),n.d(t,{Head:function(){return c.p},default:function(){return i}});var a=n(6540),r=n(8453);function l(e){const t=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",pre:"pre",code:"code",a:"a"},(0,r.RP)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.h1,null,"배경"),"\n",a.createElement(t.p,null,"관리자 매칭 요청 목록을 작업하고 있다\n해당 화면에는 페이지 네이션이 존재합니다.\n페이지 네이션을 클릭시 page,pagesize 를 지정하고 지정한 크기의 데이터를 조회합니다."),"\n",a.createElement(t.h2,null,"왜사용?"),"\n",a.createElement(t.p,null,"대용량 데이터 한번에 조회시 메모리 부담이 발생할 수 있다고 합니다.\n적당한 수의 데이터를 조회해서 페이징을 처리하는 방식을 사용합니다."),"\n",a.createElement(t.h3,null,"gorm 에서 페이지네이션 처리"),"\n",a.createElement(t.pre,null,a.createElement(t.code,null,'package main\n\ntype PageResult struct {\n\tResult     interface{} `json:"result"`\n\tTotalCount int64       `json:"totalCount"`\n}\n\nconst PageSize = 10\n\ntype Pageable struct {\n\tPage     int\n\tPageSize int\n}\n\nfunc (p Pageable) GetOffset() int {\n\treturn (p.Page - 1) * p.PageSize\n}\n//페이지 수를 매기다\nfunc Paginate(pageable dtos.Pageable) func(db *gorm.DB) *gorm.DB {\n\treturn func(db *gorm.DB) *gorm.DB {\n\t\tif pageable.Page > 0 {\n\t\t\treturn db.Limit(pageable.PageSize).Offset(pageable.GetOffset())\n\t\t}\n\t\treturn db\n\t}\n}\n\nfunc main()  {\n\t...\n\tdb, ok := v.(*gorm.DB);\n        if ok {\n            //Scopes to dynamically set the query\n            if err := db.Count(&totalCount).Scopes(Paginate(pageable)).Find(&entities).Error; err != nil {\n           fmt.Println(totalCount)\n           fmt.Println(entities)\n        }\n\t}\n}\n')),"\n",a.createElement(t.h2,null,"출처"),"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://prohannah.tistory.com/148"},"https://prohannah.tistory.com/148"),"\n",a.createElement(t.a,{href:"https://github.com/BillSJC/gorm-pageable/blob/master/pagable.go"},"https://github.com/BillSJC/gorm-pageable/blob/master/pagable.go"),"\n",a.createElement(t.a,{href:"https://gorm.io/docs/scopes.html#Pagination"},"https://gorm.io/docs/scopes.html#Pagination")))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,r.RP)(),e.components);return t?a.createElement(t,e,a.createElement(l,e)):l(e)},c=n(7292);function i(e){return a.createElement(c.A,e,a.createElement(o,e))}c.A}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-golang-2023-01-17-go-gorm-pageable-mdx-be05e35e9a343a6a0e4a.js.map