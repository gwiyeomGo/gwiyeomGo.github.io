{"version":3,"file":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-c-github-gwiyeomgo-github-io-content-posts-etc-2022-03-04-etc-browser-cache-mdx-c7f761cb139bf427cade.js","mappings":"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","sources":["webpack://gwiyeom-blog/./content/posts/etc/2022-03-04-etc-browser-cache.mdx","webpack://gwiyeom-blog/./node_modules/@lekoarts/gatsby-theme-minimal-blog-core/src/templates/post-query.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h3: \"h3\",\n    p: \"p\",\n    a: \"a\",\n    code: \"code\",\n    pre: \"pre\",\n    h1: \"h1\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h3, null, \"배포를 해도 발생하는 버그는 어떻게 해야 할까?\"), \"\\n\", React.createElement(_components.h3, null, \"배경\"), \"\\n\", React.createElement(_components.p, null, \"최근에 사용자가 발생시키는 오류에 대해\\r\\n전화가 오기전에 미리 대비할 수 있도록\\r\\n장애 대응을 모니터링 할 수 있는 프로젝트를 진행했다.\"), \"\\n\", React.createElement(_components.p, null, \"방법은 에러가 발생했을때\\r\\n요청,응답,에러스택 정보를\\r\\ndooray 이슈 등록로 등록되는 시스템이다.\"), \"\\n\", React.createElement(_components.p, null, \"처음 적용하고 나서 메일 폭탄을 받았었다\\r\\n나뿐만 아니라 개발자 모두다 스팸메일을 잔득 받은 것이다.\"), \"\\n\", React.createElement(_components.p, null, \"이 상황에 시니어 개발자님은 쓴소리로 스팸이 도는 시스템은 아무도 보지 않는다고\\r\\n명심하라고 말씀해 주셨다.\"), \"\\n\", React.createElement(_components.p, null, \"핫픽스로 에러를 처리해 올리고 싶었지만\\r\\n이번주에 배포되면 안되는 이슈가 있어서 개발자분들께 양해를 구하고 한주간 다들 같은 메일을 받았다\"), \"\\n\", React.createElement(_components.p, null, \"상당히 속상하고 빨리 처리하고 해결해야 겠다고 느꼈다.\"), \"\\n\", React.createElement(_components.p, null, \"배포 당일이 되었고\\r\\n개발계에서 테스트를 마친 수정된 코드가 배포가 되었다.\"), \"\\n\", React.createElement(_components.p, null, \"그런데 같은 에러가 발생했다.\\r\\n다행이 메일의 숫자는 확 줄었다\\r\\n(숫자 세어보기)\"), \"\\n\", React.createElement(_components.p, null, \"그리고 100개의 매장중에 10개 미만의 매장에서만 발생했다.\"), \"\\n\", React.createElement(_components.p, null, \"에러를 제현하기 위해서\\r\\n운영계 테스트 계정을 통해 기능을 동작시켰지만 발생하지 않았습니다.\"), \"\\n\", React.createElement(_components.p, null, \"클라이언트(전국 매장 pc)의 브라우저 캐시 때문에 사용자들이 버그가 여전히  발생 하는 경우 같다는 생각이 들었다.\"), \"\\n\", React.createElement(_components.p, null, \"사용자의 브라우저 캐시를 코드에서 관리할 수 있을까요?\"), \"\\n\", React.createElement(_components.p, null, \"인터넷에서 검색 했을 때 html meta tag 를 추가해 캐시 사용전에  재검증을 하는 방법을 찾았고\\r\\n적용해 보려고 한다.\"), \"\\n\", React.createElement(_components.h3, null, \"참고\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://toss.tech/article/smart-web-service-cache\"\n  }, \"https://toss.tech/article/smart-web-service-cache\"), \"\\r\\n\", React.createElement(_components.a, {\n    href: \"https://velog.io/@mgm-dev/%EA%B0%84%EB%9E%B5-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BA%90%EC%8B%9C%EC%97%90-%EB%8C%80%ED%95%B4\"\n  }, \"https://velog.io/@mgm-dev/%EA%B0%84%EB%9E%B5-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BA%90%EC%8B%9C%EC%97%90-%EB%8C%80%ED%95%B4\")), \"\\n\", React.createElement(_components.p, null, \"해당 글을 읽고 공부해 봤다.\"), \"\\n\", React.createElement(_components.p, null, \"우리의 캐시 유효 기간이 있나?\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"Cache-Control 헤더값\"), \" 응답헤더에 없다..\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, null, \"(max-age=31536000 이기 때문에, 이 리소스는 1년(31,536,000초)동안 캐시할 수 있다)\\r\\n\\n\")), \"\\n\", React.createElement(_components.p, null, \"재검증?\"), \"\\n\", React.createElement(_components.p, null, \"no-cache?\\r\\n캐시는 저장하지만 사용하려고 할 때마다 서버에 재검증 요청을 보낸다\"), \"\\n\", React.createElement(_components.p, null, \"토스 기술 블로그를 보니\\r\\n새로 배포가 이루어 지만 HTML 리소는 바뀔 수 있기 때문에\\r\\n브라우저는 항상 HTML 파일을 불러올 때 새로운 배포가 있는지 확인하도록\\r\\n\", React.createElement(_components.code, null, \"Cache-Control\"), \"값을 \", React.createElement(_components.code, null, \"max-age=0,s-maxage=31536000\"), \" 을 설정한다고 한다.\\r\\n(이로써 브라우저는 HTML 파일을 가져올 때마다 서버에 재검증 요청을 보내고, 그 사이에 배포가 있었다면 새로운 HTML 파일을 내려받습니다.)\\r\\n*변경내용\\r\\n\", React.createElement(_components.code, null, \"max-age의 최대치인 max-age=31536000\"), \"\\r\\n새로 배포가 일어나지 않는 한, 브라우저는 캐시에 저장된 JavaScript 파일을 계속 사용\"), \"\\n\", React.createElement(_components.h3, null, \"어떻게?\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, null, \" <meta http-equiv=\\\"Cache-Control\\\" content=\\\"max-age=0,s-maxage=31536000\\\">\\n\")), \"\\n\", React.createElement(_components.p, null, \"1년동안 캐시를 유지하지만 배포일어나면 재검증\"), \"\\n\", React.createElement(_components.h1, null, \"참고\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://thewebdev.info/2021/10/03/how-to-clear-browser-cache-in-react/\"\n  }, \"https://thewebdev.info/2021/10/03/how-to-clear-browser-cache-in-react/\"), \"\\r\\n\", React.createElement(_components.a, {\n    href: \"https://gahyun-web-diary.tistory.com/16\"\n  }, \"https://gahyun-web-diary.tistory.com/16\")), \"\\n\", React.createElement(_components.p, null, \"캐시를 사용하지 않는 방법도 있긴하다\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Cache-Control\"\n  }, \"https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Cache-Control\")), \"\\n\", React.createElement(_components.p, null, \"캐시사용 x\\r\\n캐쉬가 되지 않게 하는 속성으로 매번 새로운 페이지를 서버에 접속해서 가져옴\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"<meta http-equiv='cache-control' content='no-cache'>\"), \"\\r\\n// not always leads to immediate resource expiration\\r\\n//캐쉬 완료(파기)시간 정의.\\r\\n단위는 분단위\\r\\n즉, 0분이 지나면 캐쉬를 지우고 새롭게 다시 읽어온다.\\r\\n\", React.createElement(_components.code, null, \"<meta http-equiv='expires' content='0'>\"), \"\\r\\n//캐쉬가 되지 않게 하는 태그 즉, 매번 새로운 페이지를 열게된다.\\r\\n\", React.createElement(_components.code, null, \"<meta http-equiv='pragma' content='no-cache'>\")), \"\\n\", React.createElement(_components.p, null, \"하지만\\r\\nFor this specific case what you can do is to tell the browser not to cache your page, by using below meta tag inside  tag: This is temporary solution and for permanent solution, you should handle this using appropriate headers sent by your API/backend.\"), \"\\n\", React.createElement(_components.p, null, \"(\", React.createElement(_components.a, {\n    href: \"https://stackoverflow.com/questions/51207570/how-to-clear-browser-cache-in-reactjs\"\n  }, \"https://stackoverflow.com/questions/51207570/how-to-clear-browser-cache-in-reactjs\"), \")\\r\\napi 에서 설정하는 거는 이후에..\\r\\n\", React.createElement(_components.code, null, \".setHeader('Cache-Control', 'no-cache')\")), \"\\n\", React.createElement(_components.h1), \"\\n\", React.createElement(_components.p, null, \"캐쉬의 파기를 위한 속성으로는 Expires 외에 아래와 같은 다양한 방법이 있습니다. 보통 개발 시에는 캐쉬가 있으면 수정사항이 반영이 안되기 때문에 캐쉬를 없애는 것을 중요하게 생각을 하는데 서비스가 안정화 된 운영 시에는 캐쉬를 지정하여 페이지 속도를 최적화 하는 것이 좋습니다.\\r\\n그렇기 때문에 SEO Friend에서는 캐쉬를 설정하는 것을 권장합니다\\r\\n\", React.createElement(_components.a, {\n    href: \"https://www.next-t.co.kr/%EA%B2%80%EC%83%89%EC%97%94%EC%A7%84%EC%B5%9C%EC%A0%81%ED%99%94-SEO-%ED%85%8C%ED%81%AC%EB%8B%88%EC%BB%ACSEO-%EB%A9%94%ED%83%80%ED%83%9C%EA%B7%B8-metatags-expires-%EC%86%8D%EC%84%B1\"\n  }, \"https://www.next-t.co.kr/%EA%B2%80%EC%83%89%EC%97%94%EC%A7%84%EC%B5%9C%EC%A0%81%ED%99%94-SEO-%ED%85%8C%ED%81%AC%EB%8B%88%EC%BB%ACSEO-%EB%A9%94%ED%83%80%ED%83%9C%EA%B7%B8-metatags-expires-%EC%86%8D%EC%84%B1\")), \"\\n\", React.createElement(_components.p, null, \"expire 0 ? -1?\\r\\n\", React.createElement(_components.a, {\n    href: \"https://stackoverflow.com/questions/11357430/http-expires-header-values-0-and-1\"\n  }, \"https://stackoverflow.com/questions/11357430/http-expires-header-values-0-and-1\")), \"\\n\", React.createElement(_components.p, null, \"잘정리됨\\r\\n\", React.createElement(_components.a, {\n    href: \"https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=kkadda&logNo=110123278506\"\n  }, \"https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=kkadda&logNo=110123278506\")));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"C:/github/gwiyeomgo.github.io/content/posts/etc/2022-03-04-etc-browser-cache.mdx\";\nimport PostComponent, {Head} from \"../components/post\";\nPostComponent\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostComponent, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport {Head};\nconst query = \"2040642971\";\n"],"names":["_createMdxContent","props","_components","Object","assign","h3","p","a","code","pre","h1","_provideComponents","components","React","href","wrapper","MDXLayout","GatsbyMDXWrapper","PostComponent","GATSBY_COMPILED_MDX"],"sourceRoot":""}