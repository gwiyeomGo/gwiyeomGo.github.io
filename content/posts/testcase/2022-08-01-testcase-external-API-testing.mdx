---
title: TESTCASE 외부 서비스를 호출하는 API 는 어떻게 테스트하지?
date: 2022-05-23
slug: "/testcase/2022-08-01-testcase-external-API-testing"
tags:
  - GOLANG
  - TESTCASE
---

## 방법1 가상 서버를 생성
[httptest](https://pkg.go.dev/net/http/httptest) 를 사용해서 가상 서버 url 을 생성하고
실제 testcase 에서 api 를 호출할때 url을 가상 서버 url 을 적용합니다.
```
	// setUp WebServer Fixture
	server := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		if r.Method == http.MethodPost && r.URL.Path == "/project/434/posts" {
			w.WriteHeader(200)
		} else {
			w.WriteHeader(400)
		}
	}))
	defer server.Close()
```
## 방법2 테스트 케이스 실행시 변수를 바꿔 쓴다
