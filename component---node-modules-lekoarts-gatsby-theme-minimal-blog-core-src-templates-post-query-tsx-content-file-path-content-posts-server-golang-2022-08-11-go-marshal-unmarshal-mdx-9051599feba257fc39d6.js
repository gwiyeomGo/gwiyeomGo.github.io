"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[2415],{8214:function(e,n,t){t.r(n),t.d(n,{Head:function(){return o.F},default:function(){return s}});var l=t(7294),r=t(1151);function a(e){const n=Object.assign({h1:"h1",p:"p",h3:"h3",ol:"ol",li:"li",pre:"pre",code:"code",ul:"ul",a:"a"},(0,r.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.h1,null,"배경"),"\n",l.createElement(n.p,null,"golang 코드를 짜면서 데이터의 형태를 변환하는 경우가 많다..\n요청값의 데이터를 바인드 할 때\n혹은 내부 로직에서 데이터 타입을 바꿀 때\n또는 응닶값의 데이터의 타입을 수정할때 등... 여러번 찾아서 코드를 수정한다.\n한번쯤 정리하는것도 필요하다고 느낀다."),"\n",l.createElement(n.p,null,"자주"),"\n",l.createElement(n.h3,null,"내상황"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"items 의 map 값을 string 으로 받았다."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"var items []map[string]string\nif err := builder.Find(&items); err != nil {\n\tcontext.Log(c).Errorln(err.Error())\n}\n")),"\n",l.createElement(n.ol,{start:"2"},"\n",l.createElement(n.li,null,"응답값은 ",l.createElement(n.code,null," []interface{}")," 형태이다."),"\n"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'id, _ := strconv.ParseInt(item["id"], 10, 64)\nvar confirmed map[string]interface{}\njson.Unmarshal([]byte(item["confirmed"]), &confirmed)\nresult := map[string]interface{}{\n"ID":              id,\n"confirmed":       confirmed,\n}\n')),"\n",l.createElement(n.ol,{start:"3"},"\n",l.createElement(n.li,null,"결국 응답값을 만들때 string 으로 넣어주고 있었다."),"\n"),"\n",l.createElement(n.h1,null,"[]byte to json // JSON DECODING"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.code,null,"func Unmarshal(data []byte, v interface{})")),"\n"),"\n",l.createElement(n.h1,null,"json to []byte // JSON ENCODING"),"\n",l.createElement(n.p,null,"*",l.createElement(n.code,null,"func Marshal(v interface{}) ([]byte, error)")),"\n",l.createElement(n.h1,null,"실패 testcase 는 어떻게 만들까?"),"\n",l.createElement(n.p,null,"인터넷 예제를 찾아봤다\n채널을 마샬링하면 에러가 발생한다고 한다"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,'x := map[string]interface{}{\n    "foo": make(chan int),\n}\n_, err := json.Marshal(x)\n')),"\n",l.createElement(n.h1,null,"참고"),"\n",l.createElement(n.p,null,l.createElement(n.a,{href:"https://stackoverflow.com/questions/48898542/how-to-write-unit-test-for-failure-case-of-json-marshall"},"https://stackoverflow.com/questions/48898542/how-to-write-unit-test-for-failure-case-of-json-marshall"),"\n",l.createElement(n.a,{href:"https://ithub.tistory.com/333"},"https://ithub.tistory.com/333"),"\n",l.createElement(n.a,{href:"https://freshman.tech/snippets/go/http-response-to-string/"},"https://freshman.tech/snippets/go/http-response-to-string/")))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?l.createElement(n,e,l.createElement(a,e)):a(e)},o=t(8804);function s(e){return l.createElement(o.Z,e,l.createElement(c,e))}o.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-golang-2022-08-11-go-marshal-unmarshal-mdx-9051599feba257fc39d6.js.map