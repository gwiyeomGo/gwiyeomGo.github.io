"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[8321],{9735:function(n,e,r){r.r(e),r.d(e,{Head:function(){return s.F},default:function(){return i}});var t=r(7294),l=r(1151);function c(n){const e=Object.assign({h1:"h1",p:"p",pre:"pre",code:"code",ul:"ul",li:"li",a:"a"},(0,l.ah)(),n.components);return t.createElement(t.Fragment,null,t.createElement(e.h1,null,"배경"),"\n",t.createElement(e.p,null,"알림톡을 당일에 발송하는 API 는 회원을 조회한다"),"\n",t.createElement(e.p,null,"미전환 회원과 신규 회원을 각각 조회하며\r\n수신자를 수집하는데\r\n쿼리가 제대로 작동하는지 조회해봤다"),"\n",t.createElement(e.p,null,"총 구독자의 memberId 를 조회건에\r\n미전환 회원이 모두 포함되는지 보고싶었다"),"\n",t.createElement(e.pre,null,t.createElement(e.code,null,"SELECT distinct member_id FROM\r\nsubscribe_data as s\r\nwhere s.code  in(61,\r\n66,\r\n34,\r\n24,\r\n25,\r\n93,\r\n67);\r\n-- 1322 -> ids\n")),"\n",t.createElement(e.pre,null,t.createElement(e.code,null,"SELECT * FROM `members` WHERE `id`\r\nin (\r\nSELECT distinct member_id FROM\r\nsubscribe_data as s\r\nwhere s.code  in(61,\r\n66,\r\n34,\r\n24,\r\n25,\r\n93,\r\n67)\r\n)   ;\r\n-- 937 (미전환)\n")),"\n",t.createElement(e.pre,null,t.createElement(e.code,null,"select *\r\nwhere id in(\r\nSELECT distinct member_id FROM\r\nsubscribe_data as s\r\nwhere s.code  in(61,\r\n66,\r\n34,\r\n24,\r\n25,\r\n93,\r\n67)\r\n)\r\n ;\r\n-- 385 + 937  = 1322\n")),"\n",t.createElement(e.pre,null,t.createElement(e.code,null,"SELECT distinct member_id FROM\r\nsubscribe_data as s\r\nwhere s.code  in(\r\n61,\r\n66,\r\n34,\r\n24,\r\n25,\r\n93,\r\n67)\r\nunion\r\nSELECT id as member_id\r\nFROM `members` WHERE `id`\r\nin (\r\nSELECT distinct member_id FROM\r\nsubscribe_data as s\r\nwhere s.code  in(61,\r\n66,\r\n34,\r\n24,\r\n25,\r\n93,\r\n67)\r\n) ;\n")),"\n",t.createElement(e.p,null,"=> ids 갑 1322개의 값과 일치 미전환 회원이 모두 포함"),"\n",t.createElement(e.h1,null,"union"),"\n",t.createElement(e.p,null,"중복되지 않은 유일한 정보만 추출"),"\n",t.createElement(e.h1,null,"20230824 UNION ALL 사용해서 합치기"),"\n",t.createElement(e.p,null,"회원을 통합하면서 회원서비스를 분리했고 기존에 회원테이블과 신규테이블이 생성되었고\r\n총 회원수를 구하고 싶었다 (탈퇴 제외)"),"\n",t.createElement(e.pre,null,t.createElement(e.code,null,"-- SELECT count(*) as cnt FROM A\r\n-- 2\r\n\r\n-- SELECT count(*) as cnt FROM  B\r\n--3\r\n\r\nselect sum(a.cnt)\r\nfrom ((SELECT count(*) as cnt FROM A)\r\nUNION ALL\r\n(SELECT count(*) as cnt FROM  B )\r\n) as a;\r\n-- 5\n")),"\n",t.createElement(e.ul,null,"\n",t.createElement(e.li,null,"중복제거하지 않음 UNION ALL"),"\n",t.createElement(e.li,null,"최소 필요 컬럼만 SELECT 하기"),"\n"),"\n",t.createElement(e.p,null,t.createElement(e.a,{href:"https://donghodazzi.tistory.com/140"},"https://donghodazzi.tistory.com/140")))}var a=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,l.ah)(),n.components);return e?t.createElement(e,n,t.createElement(c,n)):c(n)},s=r(8804);function i(n){return t.createElement(s.Z,n,t.createElement(a,n))}s.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2023-06-12-mysql-union-mdx-da1af019ac988ce6838b.js.map