"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[6630],{4880:function(e,t,n){n.r(t),n.d(t,{Head:function(){return c.F},default:function(){return u}});var l=n(7294),a=n(1151);function r(e){const t=Object.assign({h1:"h1",ul:"ul",li:"li",blockquote:"blockquote",p:"p",pre:"pre",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,a.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.h1,null,"배경"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"datetime 인 컬럼을 varchar 로 변경해야 했다"),"\n",l.createElement(t.li,null,"datetime 컬럼에  '%Y-m%-d %H:%i:%s' 형태 데이터 존재함"),"\n"),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"sent_date (datetime 타입) 데이터 => varchar 로 타입 변경"),"\n"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"DATE_FORMAT(date,format )"),"\n"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-sql"},"-- 백업 위해 컬럼 추가\r\nALTER TABLE test_table ADD sent_date_varchar VARCHAR(20);\r\n\r\n-- 업데이트\r\nUPDATE test_table SET sent_date_varchar = DATE_FORMAT(sent_date,'%Y%m%d%H%i%s')  WHERE id > 0 and sent_date is not null;\r\n\r\n-- 컬럼 이름 변경\r\n\r\nALTER TABLE test_table\r\nCHANGE COLUMN `sent_date` `sent_date_old` DATETIME NULL DEFAULT NULL ,\r\nCHANGE COLUMN `sent_date_varchar` `sent_date` VARCHAR(20) NULL DEFAULT NULL ;\r\n\r\n-- 삭제\r\nALTER TABLE store_news DROP COLUMN sent_date_old;\n")),"\n",l.createElement(t.blockquote,null,"\n",l.createElement(t.p,null,"sent_date varchar  형태 변환"),"\n"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"STR_TO_DATE( str, format )"),"\n",l.createElement(t.li,null,"DATE_FORMAT( date , format )","\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"date 타입은 DATE 또는 DATETIME"),"\n",l.createElement(t.li,null,"날짜가 VARCHAR 을 STR_TO_DATE 으로 DATE 또는 DATETIME 형식으로 변경 후 사용"),"\n"),"\n"),"\n"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-sql"},"SELECT sent_date as '기존 str',\r\n    DATE_FORMAT(\r\n        STR_TO_DATE(sent_date, '%Y%m%d%H%i%s'),\r\n        '%Y-%m-%d %H:%i:%s') as '변경 str' from store_news ;\n")),"\n",l.createElement(t.table,null,l.createElement(t.thead,null,l.createElement(t.tr,null,l.createElement(t.th,null,"기존 str"),l.createElement(t.th,null,"변경 str"))),l.createElement(t.tbody,null,l.createElement(t.tr,null,l.createElement(t.td,null,"'20221117180000'"),l.createElement(t.td,null,"'2022-11-17 18:00:00'")),l.createElement(t.tr,null,l.createElement(t.td,null,"'20221121180000'"),l.createElement(t.td,null,"'2022-11-21 18:00:00'")),l.createElement(t.tr,null,l.createElement(t.td,null,"'20221130180000'"),l.createElement(t.td,null,"'2022-11-30 18:00:00'")),l.createElement(t.tr,null,l.createElement(t.td,null,"NULL"),l.createElement(t.td,null,"NULL")),l.createElement(t.tr,null,l.createElement(t.td,null,"'20221118180000'"),l.createElement(t.td,null,"'2022-11-18 18:00:00'")))),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"(mysql 버전 '8.0.33') 에서 DATE_FORMAT 에  시간 형식 string 데이터를 넣었는데 동작했다... 원래 되는건가?"),"\n"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-sql"},"SELECT DATE_FORMAT('20231215180000', '%Y-%m-%d %H:%i:%s')  as changestr;\r\nSELECT DATE_FORMAT('2023-12-15 18:00:00', '%Y%m%d%H%i%s')  as changestr;\n")),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"(tip 버전 확인)"),"\n"),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,"SELECT VERSION();\n")))}var E=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?l.createElement(t,e,l.createElement(r,e)):r(e)},c=n(8804);function u(e){return l.createElement(c.Z,e,l.createElement(E,e))}c.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2023-10-25-mysql-date-to-string-mdx-e97755cc39257a4b7f81.js.map