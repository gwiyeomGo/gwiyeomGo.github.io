"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[3271],{869:function(e,t,n){n.r(t),n.d(t,{Head:function(){return c.F},default:function(){return i}});var r=n(7294),a=n(1151);function l(e){const t=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",pre:"pre",code:"code",a:"a"},(0,a.ah)(),e.components);return r.createElement(r.Fragment,null,r.createElement(t.h1,null,"배경"),"\n",r.createElement(t.p,null,"관리자 매칭 요청 목록을 작업하고 있다\r\n해당 화면에는 페이지 네이션이 존재합니다.\r\n페이지 네이션을 클릭시 page,pagesize 를 지정하고 지정한 크기의 데이터를 조회합니다."),"\n",r.createElement(t.h2,null,"왜사용?"),"\n",r.createElement(t.p,null,"대용량 데이터 한번에 조회시 메모리 부담이 발생할 수 있다고 합니다.\r\n적당한 수의 데이터를 조회해서 페이징을 처리하는 방식을 사용합니다."),"\n",r.createElement(t.h3,null,"gorm 에서 페이지네이션 처리"),"\n",r.createElement(t.pre,null,r.createElement(t.code,null,'package main\r\n\r\ntype PageResult struct {\r\n\tResult     interface{} `json:"result"`\r\n\tTotalCount int64       `json:"totalCount"`\r\n}\r\n\r\nconst PageSize = 10\r\n\r\ntype Pageable struct {\r\n\tPage     int\r\n\tPageSize int\r\n}\r\n\r\nfunc (p Pageable) GetOffset() int {\r\n\treturn (p.Page - 1) * p.PageSize\r\n}\r\n//페이지 수를 매기다\r\nfunc Paginate(pageable dtos.Pageable) func(db *gorm.DB) *gorm.DB {\r\n\treturn func(db *gorm.DB) *gorm.DB {\r\n\t\tif pageable.Page > 0 {\r\n\t\t\treturn db.Limit(pageable.PageSize).Offset(pageable.GetOffset())\r\n\t\t}\r\n\t\treturn db\r\n\t}\r\n}\r\n\r\nfunc main()  {\r\n\t...\r\n\tdb, ok := v.(*gorm.DB);\r\n        if ok {\r\n            //Scopes to dynamically set the query\r\n            if err := db.Count(&totalCount).Scopes(Paginate(pageable)).Find(&entities).Error; err != nil {\r\n           fmt.Println(totalCount)\r\n           fmt.Println(entities)\r\n        }\r\n\t}\r\n}\n')),"\n",r.createElement(t.h2,null,"출처"),"\n",r.createElement(t.p,null,r.createElement(t.a,{href:"https://prohannah.tistory.com/148"},"https://prohannah.tistory.com/148"),"\r\n",r.createElement(t.a,{href:"https://github.com/BillSJC/gorm-pageable/blob/master/pagable.go"},"https://github.com/BillSJC/gorm-pageable/blob/master/pagable.go"),"\r\n",r.createElement(t.a,{href:"https://gorm.io/docs/scopes.html#Pagination"},"https://gorm.io/docs/scopes.html#Pagination")))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?r.createElement(t,e,r.createElement(l,e)):l(e)},c=n(8804);function i(e){return r.createElement(c.Z,e,r.createElement(o,e))}c.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-golang-2023-01-17-go-gorm-pageable-mdx-bef37b2dd4f7268c3d89.js.map