"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[8731],{7453:function(e,n,t){t.r(n),t.d(n,{Head:function(){return o.F},default:function(){return s}});var r=t(7294),l=t(1151);function a(e){const n=Object.assign({h1:"h1",p:"p",h3:"h3",ol:"ol",li:"li",pre:"pre",code:"code",ul:"ul",a:"a"},(0,l.ah)(),e.components);return r.createElement(r.Fragment,null,r.createElement(n.h1,null,"배경"),"\n",r.createElement(n.p,null,"golang 코드를 짜면서 데이터의 형태를 변환하는 경우가 많다..\r\n요청값의 데이터를 바인드 할 때\r\n혹은 내부 로직에서 데이터 타입을 바꿀 때\r\n또는 응닶값의 데이터의 타입을 수정할때 등... 여러번 찾아서 코드를 수정한다.\r\n한번쯤 정리하는것도 필요하다고 느낀다."),"\n",r.createElement(n.p,null,"자주"),"\n",r.createElement(n.h3,null,"내상황"),"\n",r.createElement(n.ol,null,"\n",r.createElement(n.li,null,"items 의 map 값을 string 으로 받았다."),"\n"),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,"var items []map[string]string\r\nif err := builder.Find(&items); err != nil {\r\n\tcontext.Log(c).Errorln(err.Error())\r\n}\n")),"\n",r.createElement(n.ol,{start:"2"},"\n",r.createElement(n.li,null,"응답값은 ",r.createElement(n.code,null," []interface{}")," 형태이다."),"\n"),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,'id, _ := strconv.ParseInt(item["id"], 10, 64)\r\nvar confirmed map[string]interface{}\r\njson.Unmarshal([]byte(item["confirmed"]), &confirmed)\r\nresult := map[string]interface{}{\r\n"ID":              id,\r\n"confirmed":       confirmed,\r\n}\n')),"\n",r.createElement(n.ol,{start:"3"},"\n",r.createElement(n.li,null,"결국 응답값을 만들때 string 으로 넣어주고 있었다."),"\n"),"\n",r.createElement(n.h1,null,"[]byte to json // JSON DECODING"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,r.createElement(n.code,null,"func Unmarshal(data []byte, v interface{})")),"\n"),"\n",r.createElement(n.h1,null,"json to []byte // JSON ENCODING"),"\n",r.createElement(n.p,null,"*",r.createElement(n.code,null,"func Marshal(v interface{}) ([]byte, error)")),"\n",r.createElement(n.h1,null,"실패 testcase 는 어떻게 만들까?"),"\n",r.createElement(n.p,null,"인터넷 예제를 찾아봤다\r\n채널을 마샬링하면 에러가 발생한다고 한다"),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,'x := map[string]interface{}{\r\n    "foo": make(chan int),\r\n}\r\n_, err := json.Marshal(x)\n')),"\n",r.createElement(n.h1,null,"참고"),"\n",r.createElement(n.p,null,r.createElement(n.a,{href:"https://stackoverflow.com/questions/48898542/how-to-write-unit-test-for-failure-case-of-json-marshall"},"https://stackoverflow.com/questions/48898542/how-to-write-unit-test-for-failure-case-of-json-marshall"),"\r\n",r.createElement(n.a,{href:"https://ithub.tistory.com/333"},"https://ithub.tistory.com/333"),"\r\n",r.createElement(n.a,{href:"https://freshman.tech/snippets/go/http-response-to-string/"},"https://freshman.tech/snippets/go/http-response-to-string/")))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?r.createElement(n,e,r.createElement(a,e)):a(e)},o=t(8804);function s(e){return r.createElement(o.Z,e,r.createElement(c,e))}o.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-c-github-gwiyeomgo-github-io-content-posts-server-golang-2022-08-11-go-marshal-unmarshal-mdx-ccbca03c9162029ee73b.js.map