"use strict";(self.webpackChunkgwiyeom_blog=self.webpackChunkgwiyeom_blog||[]).push([[7531],{8740:function(e,n,l){l.r(n),l.d(n,{Head:function(){return i.p},default:function(){return u}});var t=l(6540),s=l(8453);function r(e){const n=Object.assign({h3:"h3",ol:"ol",li:"li",pre:"pre",code:"code",p:"p",h1:"h1",a:"a"},(0,s.RP)(),e.components);return t.createElement(t.Fragment,null,t.createElement(n.h3,null,"배경"),"\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"처음 개발을 시작할때 새로운 기능을 만들때 table을 새로 만들었다,"),"\n",t.createElement(n.li,null,"시스템에 기능이 추가되면서 사업지역의 사용이 늘어났음"),"\n"),"\n",t.createElement(n.h3,null,"문제"),"\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"사업지역명의 데이터를 한글로 받음"),"\n",t.createElement(n.li,null,"같은 사업지역명 데이터를 sharings 와 companies 테이블에서 다른 컬럼명으로 사용하고 있다.","\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"sharings 는 business_area로 지역데이터를 보관"),"\n",t.createElement(n.li,null,"companies 는 business_region로 지역 데이터를 보관"),"\n"),"\n"),"\n"),"\n",t.createElement(n.h3,null,"1 business_region table생성"),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,"\nCREATE TABLE IF NOT EXISTS `business_region` (\n\n `id` INT NOT NULL AUTO_INCREMENT,\n\n `type` VARCHAR(50) NOT NULL COMMENT '기관 id',\n\n `key` VARCHAR(50) NOT NULL COMMENT '지역 key',\n\n `value` VARCHAR(50) NOT NULL COMMENT '지역명',\n\n PRIMARY KEY (`id`),\n\n KEY `idx_compaies_business_region_key` (`key`)\n\n);\n\n")),"\n",t.createElement(n.h3,null,"2 sharings 와 companies 테이블에서 사업지역명 통일"),"\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"sharings 는 business_area로 지역데이터를 보관"),"\n",t.createElement(n.li,null,"companies 는 business_region로 지역 데이터를 보관"),"\n"),"\n",t.createElement(n.p,null,"이슈 sharings 의 컬럼을 business_area로 변경하고 사용하는 데이터를 찾아 변경"),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,"ALTER TABLE sharings RENAME COLUMN business_area TO business_region;\n")),"\n",t.createElement(n.p,null,"신청 내역에서 사용되는 부분을 변경"),"\n",t.createElement(n.h1,null,"3 business_region 테이블에서 사업지역명 key값 정의"),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,"A01 전국\nA02 서울특별시\nA03 부산광역시\nA04 인천광역시\nA05 대구광역시\nA06 광주광역시\nA07 대전광역시\n")),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,'insert into (`type`,`key`,`value`)\nvalues\n("area","A01" ,"전국"),\n("area","A02" ,"서울특별시"),\n("area","A03" ,"부산광역시"),\n("area","A04" ,"인천광역시"),\n("area","A05" ,"대구광역시"),\n("area","A06" ,"광주광역시"),\n("area","A07" ,"대전광역시");\n')),"\n",t.createElement(n.h3,null,"4.기존데이터 변경"),"\n",t.createElement(n.p,null,"sharings 의 business_region 값이 전국인 경우를 찾아서 값을 A01으로 변경한다"),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,"UPDATE sharings SET business_region = '전국' WHERE business_region = A01;\n")),"\n",t.createElement(n.p,null,"그룹으로",t.createElement(n.a,{href:"https://stackoverflow.com/questions/12754470/mysql-update-case-when-then-else"},"https://stackoverflow.com/questions/12754470/mysql-update-case-when-then-else")),"\n",t.createElement(n.pre,null,t.createElement(n.code,null,'\nUPDATE sharings SET business_region = CASE\n\tWHEN business_region ="전국" THEN "A01"\n\tWHEN business_region ="서울특별시" THEN "A02"\n\tWHEN business_region ="부산광역시" THEN "A03"\n\tWHEN business_region ="인천광역시" THEN "A04"\n\tWHEN business_region ="대구광역시" THEN "A05"\n\tWHEN business_region ="광주광역시" THEN "A06"\n\tWHEN business_region ="대전광역시" THEN "A07"\n    END\nWHERE business_region  in \n("전국" ,"서울특별시" ,"부산광역시" ,"인천광역시" ,"대구광역시" ,"광주광역시" ,"대전광역시" )\n\n')),"\n",t.createElement(n.p,null,"companies 의 business_region 값이 서울특별시 인 경우를 찾아서 값을 A01으로 변경한다"))}var a=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,s.RP)(),e.components);return n?t.createElement(n,e,t.createElement(r,e)):r(e)},i=l(7292);function u(e){return t.createElement(i.A,e,t.createElement(a,e))}i.A}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-server-database-mysql-2021-04-28-mysql-convert-d-bcolumn-mdx-de77484172462f3825a0.js.map